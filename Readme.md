书籍《Java设计模式》-刘伟
# 简单工厂模式

>简单工厂模式（Simple Factory Pattern）：定义一个工厂类，它可以根据参数的不同返回不同类的实例，被创建的实例通常都具有共同的父类。  

由于 简单工厂模式中用于创建实例的方法通常都是静态方法，因此简单工厂模式又被称为静态工厂(Static Factory Method)模式，它是一种创建型模式。

## 简单工厂模式结构

1. Factory（工厂角色）：又叫做工厂类，它是简单工厂模式的核心，负责实现创建所有产品实例的内部逻辑。对外提供静态的工厂方法，返回值类型为抽象类类型。
2. Product（抽象产品角色）：工厂类创建的所有对象的父类，封装了各种产品对象的公有方法。
3. ConcreteProduct（具体产品角色）：简单工厂模式的创建目标，所有被创建的对象都充当这个角色的某个具体的实例。它需要实现抽象产品角色的抽象方法。

![image-20220329222845689](.\images\image-20220329222845689.png)

## 创建对象与使用对象

Java中通常有以下几种创建对象的方式：

* 使用new关键字直接创建对象
* 通过反射机制创建对象
* 通过克隆方法创建对象
* 通过工厂类创建对象

工厂是强调：两个类A和B之间的关系应该仅仅是A创建B或者A使用B，而不能两种关系都有。

创建和使用分离可以防止用来实例化一个类的数据和代码在多个类中到处都是，可以将有关创建的知识搬移到一个工厂类中。但并不是需要为系统中的每个类都配置一个工厂类，如果一个类很简单，而且不存在太多变化，其构造过程也很简单，此时就无需为其提供工厂类，直接在使用之前实例化即可。

## 简单工厂模式优/缺点与适用环境

### 简单工厂模式优点：

优点主要有如下：

1. 工厂类包含必要的判断逻辑，可以决定在什么时候创建哪一个产品类的实例，客户端可以免除直接创建产品对象的职责，而仅仅“消费”产品，简单工厂模式实现了对象创建和使用的分离。
2. 客户端无须知道所创建的具体产品类的类名，只需要知道具体产品类所对应的参数即可，对于一些复杂的类名，通过简单工厂模式可以在一定程度上减少使用者的记忆量。
3. 通过引入配置文件，可以在不修改任何客户端代码的情况下更换和增加新的具体产品类，在一定程度上提高了系统的灵活性。

### 简单工厂模式缺点

缺点主要有如下：

1. 由于工厂类集中了所有产品的创建逻辑，职责过重，一旦不能正常工作，整个系统都要受到影响。
2. 使用简单工厂模式势必会增加系统中类的个数（引入了新的工厂类），增加了系统的复杂度和理解难度。
3. 系统扩展困难，一旦添加新产品就不得不修改工厂逻辑，在产品类型较多时有可能造成工厂逻辑过于复杂，不利于系统的扩展和维护。
4. 简单工厂模式由于使用了静态工厂方法，造成工厂角色无法形成基于继承的等级结构。

### 简单工厂模式适用环境

在以下情况下可以考虑使用简单工厂模式：

* 工厂类负责创建的对象比较少，由于创建的对象较少，不会造成工厂方法中的业务逻辑太过复杂。
* 客户端只知道传人工厂类的参数，对于如何创建对象并不关心。